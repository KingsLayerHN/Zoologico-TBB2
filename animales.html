<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <title>Zoologico</title>
    <link rel="stylesheet" href="./css/styles.css">
</head>

<body class="auth">
    <div class="container">
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="usuarios.html">Usuario</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="animales.html">Animales</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="especies.html">Especies</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="subespecies.html">Subespecies</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="habitad.html">Habitad</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="zonas.html">Zonas</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="empleados.html">Empleados</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="veterinarios.html">Veterinarios</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="cuidadores.html">Cuidadores</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="mantenimientozonas.html">Mantenimento Zonas</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="historialalimenticio.html">Historial Alimenticio</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="historialmedico.html">Historial Medico</a>
                    </li>


                </ul>
            </div>
        </nav>
        <button type="button" class="btn btn-success" data-target="#animalsModal" data-toggle="modal">Agregar</button>
        <button type="button" class="btn btn-dark" data-target="#animalsModalEdite">Modificar</button>
        <button type="button" class="btn btn-danger" disabled="true">Eliminar</button>
        <table class="table" id="animal_table">
            <thead class="thead-dark">
                <tr>
                    <th>No</th>
                    <th>Nombre</th>
                    <th>Nombre Cientifico</th>
                    <th>Pais</th>
                    <th>Edad</th>
                    <th>Peso</th>
                    <th>Continente</th>
                    <th>En Cautividad</th>
                </tr>
            </thead>
            <tbody class="tbody">

            </tbody>
        </table>


        <!-- Modal -->
        <div class="modal fade" id="animalsModal" tabindex="-1" role="dialog" aria-labelledby="animalsModalLabel"
            aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="animalsModalLabel">Animales</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form>
                            <div class="form-group">
                                <label for="nombre">Nombre del animal</label>
                                <input type="text" class="form-control" id="nombre"  placeholder="Ingrese nombre del animal">
                            </div>
                            <div class="form-group">
                                <label for="nombre_cientifico">Nombre cientifico</label>
                                <input type="text" class="form-control" id="nombre_cientifico" placeholder="Ingrese nombre cientifico">
                            </div>
                            <div class="form-group">
                                <label for="pais">Pais</label>
                                <input type="text" class="form-control" id="pais" placeholder="Ingrese el pais">
                            </div>
                            <div class="form-group">
                                <label for="edad">Edad</label>
                                <input type="number" class="form-control" id="edad" placeholder="Ingrese la edad">
                            </div>
                            <div class="form-group">
                                <label for="peso">Peso</label>
                                <input type="number" class="form-control" id="peso" placeholder="Ingrese el peso">
                            </div>
                            <div class="form-group">
                                <label for="continente">Continente</label>
                                <input type="text" class="form-control" id="continente" placeholder="Ingrese el continente">
                            </div>
                            <div class="form-group">
                                <label for="cautiverio">Cautiverio</label>
                                <select class="form-control" id="cautiverio">
                                    <option value="">Seleccione una opcion</option>
                                    <option value="1">1</option>
                                    <option value="2">0</option>
                                </select>
                            </div>
                            
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                        <button type="button" class="btn btn-primary" onclick="save_animal()">Guardar</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Modal Edite-->
        <div class="modal fade" id="animalsModalEdite" tabindex="-1" role="dialog" aria-labelledby="animalsModalLabel"
            aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="animalsModalLabelEdite">Animales</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form>
                            <div class="form-group">
                                <label for="claven">Nombre del animal</label>
                                <input type="text" class="form-control" id="claven"  disable="true" >
                            </div>
                            <div class="form-group">
                                <label for="nombreEdite">Nombre del animal</label>
                                <input type="text" class="form-control" id="nombreEdite"  placeholder="Ingrese nombre del animal">
                            </div>
                            <div class="form-group">
                                <label for="nombre_cientificoEdite">Nombre cientifico</label>
                                <input type="text" class="form-control" id="nombre_cientificoEdite" placeholder="Ingrese nombre cientifico">
                            </div>
                            <div class="form-group">
                                <label for="paisEdite">Pais</label>
                                <input type="text" class="form-control" id="paisEdite" placeholder="Ingrese el pais">
                            </div>
                            <div class="form-group">
                                <label for="edadEdite">Edad</label>
                                <input type="number" class="form-control" id="edadEdite" placeholder="Ingrese la edad">
                            </div>
                            <div class="form-group">
                                <label for="pesoEdite">Peso</label>
                                <input type="number" class="form-control" id="pesoEdite" placeholder="Ingrese el peso">
                            </div>
                            <div class="form-group">
                                <label for="continenteEdite">Continente</label>
                                <input type="text" class="form-control" id="continenteEdite" placeholder="Ingrese el continente">
                            </div>
                            <div class="form-group">
                                <label for="cautiverioEdite">Cautiverio</label>
                                <select class="form-control" id="cautiverioEdite">
                                    <option value="">Seleccione una opcion</option>
                                    <option value="1">1</option>
                                    <option value="2">0</option>
                                </select>
                            </div>
                            
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                        <button type="button" class="btn btn-primary" onclick="save_animal()">Guardar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/6.1.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.1.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.1.1/firebase-firestore.js"></script>
    <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#config-web-app -->

    <script>
        // Your web app's Firebase configuration
        var firebaseConfig = {
            apiKey: "AIzaSyDJVpKYgXFURDuuuvn8XITBlcGMn1UmC_M",
            authDomain: "users-7557f.firebaseapp.com",
            databaseURL: "https://users-7557f.firebaseio.com",
            projectId: "users-7557f",
            storageBucket: "users-7557f.appspot.com",
            messagingSenderId: "207944477105",
            appId: "1:207944477105:web:15796ceb1ae54bb8"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
    </script>
    <script>
        var table = document.getElementById('animal_table').getElementsByTagName('tbody')[0] // Tabla de datos
        let firestore = firebase.firestore();
        firestore.collection('animal').get().then(data => {
            data.docs.forEach(function (doc, index) {
                let animal = doc.data();
                //console.log(user);
                var row = table.insertRow();
                add_cell(row, doc.id);
                add_cell(row, animal.nombre_comun);
                add_cell(row, animal.nombre_cientifico);
                add_cell(row, animal.pais);
                add_cell(row, animal.edad);
                add_cell(row, animal.peso);
                add_cell(row, animal.continente);
                add_cell(row, animal.cautividad);
            });
        }) 
        function add_cell (tr, text) {
            var td = tr.insertCell();
            td.textContent = text;
            return td;
        }   
    </script>
    <script>
        function rellenar(){
            
        }
        function save_animal(){
            alert("entro");
            let nombre_comun=document.getElementById('nombre').value;
            let nombre_cientifico=document.getElementById('nombre_cientifico').value;
            let pais=document.getElementById('pais').value;
            let edad=document.getElementById('edad').value;
            let peso=document.getElementById('peso').value;
            let continente=document.getElementById('continente').value;
            let cautividad=document.getElementById('cautiverio').value;
            db.collection("animal").add({
                nombre_comun,
                nombre_cientifico,
                cautividad,
                edad,
                peso,
                pais,
                continente
            })
            .then(function(docRef) {
                console.log("Document written with ID: ", docRef.id);
                alert("Animal registrado")
                document.getElementById('nombre').value = "";
                document.getElementById('nombre_cientifico').value = "";
                document.getElementById('pais').value = "";
                document.getElementById('edad').value = "";
                document.getElementById('peso').value = "";
                document.getElementById('continente').value = "";
                document.getElementById('cautiverio').value = "";
            })
            .catch(function(error) {
                console.error("Error adding document: ", error);
            });
        }

        function update_animal(){
            let nombre_comun=document.getElementById('nombre').value;
            let nombre_cientifico=document.getElementById('nombre_cientifico').value;
            let pais=document.getElementById('pais').value;
            let edad=document.getElementById('edad').value;
            let peso=document.getElementById('peso').value;
            let continente=document.getElementById('continente').value;
            let cautividad=document.getElementById('cautiverio').value;
            let clave=document.getElementById('id_animal').value;
           
            var washingtonRef = db.collection("animal").doc(clave);

            // Set the "animal" field of the city 'DC'
            return washingtonRef.update({
                nombre_comun,
                nombre_cientifico,
                cautividad,
                edad,
                peso,
                pais,
                continente
            })
            .then(function() {
                console.log("Document successfully updated!");
            })
            .catch(function(error) {
                // The document probably doesn't exist.
                console.error("Error updating document: ", error);
            });
        }
    </script>
    
</body>

</html>